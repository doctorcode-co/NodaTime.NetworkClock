<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Nodatime.NetworkClock : An SNTP-based clock for Noda Time">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Nodatime.NetworkClock</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mj1856/NodaTime.NetworkClock">View on GitHub</a>

          <h1 id="project_title">Nodatime.NetworkClock</h1>
          <h2 id="project_tagline">An SNTP-based clock for Noda Time</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mj1856/NodaTime.NetworkClock/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mj1856/NodaTime.NetworkClock/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="nodatimenetworkclock" class="anchor" href="#nodatimenetworkclock" aria-hidden="true"><span class="octicon octicon-link"></span></a>NodaTime.NetworkClock</h1>

<p><a href="https://gitter.im/mj1856/NodaTime.NetworkClock?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/mj1856/NodaTime.NetworkClock"></a></p>

<p>A <code>NodaTime.IClock</code> implementation that gets the current time from an NTP server instead of the computer's local clock.</p>

<div class="highlight highlight-powershell"><pre>PM<span class="pl-k">&gt;</span> <span class="pl-c1">Install-Package</span> NodaTime.NetworkClock</pre></div>

<p>Example Usage:</p>

<div class="highlight highlight-csharp"><pre><span class="pl-c">// Just like SystemClock, you can obtain a singleton instance</span>
<span class="pl-k">var</span> clock = NetworkClock.Instance;

<span class="pl-c">// Optionally, you can adjust some settings.</span>
<span class="pl-c">// These are the defaults, and can be omited if you aren't going to change them.</span>
clock.NtpServer = <span class="pl-s"><span class="pl-pds">"</span>pool.ntp.org<span class="pl-pds">"</span></span>;              <span class="pl-c">// which server to contact</span>
clock.CacheTimeout = Duration.FromMinutes(<span class="pl-c1">15</span>); <span class="pl-c">// how long between calls to the server</span>

<span class="pl-c">// Call .Now to get the current time as an Instant</span>
Instant now = clock.Now;

<span class="pl-c">// Like any Instant, you can then convert to a time zone</span>
DateTimeZone tz = DateTimeZoneProviders.Tzdb[<span class="pl-s"><span class="pl-pds">"</span>America/New_York<span class="pl-pds">"</span></span>];
ZonedDateTime zdt = now.InZone(tz);

<span class="pl-c">// Of course, you can convert this to whatever format makes sense in your application.</span>
<span class="pl-c">// You can use any of the following:</span>
LocalDateTime ldt = zdt.LocalDateTime;
OffsetDateTime odt = zdt.ToOffsetDateTime();
DateTimeOffset dto = zdt.ToDateTimeOffset();
DateTime dt = zdt.ToDateTimeUnspecified();</pre></div>

<p>Note that technically, the implementation is currently just "SNTP", as it doesn't account for the delay in retrieving the time, and it only makes a single query to the server.   I will probably update it to a full NTP client at some point.  (PR's are welcome!)</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Nodatime.NetworkClock maintained by <a href="https://github.com/mj1856">mj1856</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
